//--------------------------------------------------------------------------------------
// By Stars XU Tianchen
//--------------------------------------------------------------------------------------

#include "Impulse2DCS.hlsli"

//--------------------------------------------------------------------------------------
// Structured Buffers
//--------------------------------------------------------------------------------------
RWStructuredBuffer<float4>	g_rwDye	: register(u0);

//--------------------------------------------------------------------------------------
// Add dye
//--------------------------------------------------------------------------------------
[numthreads(THREAD_BLOCK_SIZE, 1, 1)]
void main(uint3 DTid : SV_DispatchThreadID)
{
	static const half fDye = 0.05 * length(m_vForce);

	const half fBasis = Impulse2D(DTid.x);
	g_rwDye[DTid.x] += fDye * fBasis;
}
