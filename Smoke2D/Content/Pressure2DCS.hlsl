//--------------------------------------------------------------------------------------
// By Stars XU Tianchen
//--------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------
// Type definations
//--------------------------------------------------------------------------------------
typedef float	floatV;
typedef half	halfV;

#include "Jacobi2DCS.hlsli"

//--------------------------------------------------------------------------------------
// Macros
//--------------------------------------------------------------------------------------
//static const float g_fCellsPerUnit = 1.0 / CELL_SIZE;

//--------------------------------------------------------------------------------------
// Poisson pressure
//--------------------------------------------------------------------------------------
[numthreads(THREAD_BLOCK_SIZE, 1, 1)]
void main(uint3 DTid : SV_DispatchThreadID)
{
	// Current location
	const uint2 vPos = { DTid.x % m_vSimSize.x, DTid.x / m_vSimSize.x };

	// Jacobi iteration
	const half2 vf = { -1.0, 4.0 };
	const uint3 vTex = { vPos, DTid.x };
	g_rwUnknown[DTid.x] = Jacobi(vf, vTex);
}
